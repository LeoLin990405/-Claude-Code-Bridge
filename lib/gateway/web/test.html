<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Gateway Test</title>
    <script src="https://unpkg.com/vue@3/dist/vue.global.prod.js"></script>
</head>
<body style="background:#1a1a2e;color:white;padding:20px;">
    <div id="app">
        <h1>Gateway Test</h1>
        <div v-if="loading">Loading...</div>
        <div v-else>
            <h2>Status: {{ status.gateway ? 'OK' : 'Error' }}</h2>
            <h3>Providers:</h3>
            <ul>
                <li v-for="p in status.providers" :key="p.name">
                    {{ p.name }}: {{ p.status }} ({{ p.total_input_tokens || 0 }} in / {{ p.total_output_tokens || 0 }} out)
                </li>
            </ul>
        </div>
        <div v-if="error" style="color:red;">Error: {{ error }}</div>
    </div>
    <script>
        const { createApp, ref, onMounted } = Vue;
        createApp({
            setup() {
                const status = ref({ gateway: null, providers: [] });
                const loading = ref(true);
                const error = ref(null);
                
                onMounted(async () => {
                    try {
                        const res = await fetch('/api/status');
                        status.value = await res.json();
                        console.log('Status loaded:', status.value);
                    } catch (e) {
                        error.value = e.message;
                        console.error('Error:', e);
                    } finally {
                        loading.value = false;
                    }
                });
                
                return { status, loading, error };
            }
        }).mount('#app');
    </script>
</body>
</html>
